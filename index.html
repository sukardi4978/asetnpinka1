<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Aset BPS</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    #searchBox { width: 250px; padding: 5px; }
    #output { margin-top: 20px; }
  </style>
</head>
<body>
  <h1>Daftar Aset</h1>
  <input id="searchBox" type="text" placeholder="Nomor Aset">
  <button id="searchButton">Cari</button>
  <div id="output"></div>
  <marquee id="runningText" scrollamount="4"></marquee>

  <script>
    const assets = [
      {kode:'12345678-0', nama:'Laptop Lenovo', lokasi:'Gudang'},
      {kode:'87654321-0', nama:'Printer Epson', lokasi:'Ruang IT'}
    ];

    function formatAsset(a){
      return `<b>${a.kode}</b>: ${a.nama}, Lokasi: ${a.lokasi}`;
    }

    let selectNextClick = false; // flag untuk kontrol select-all sekali saja

    function searchAsset(){
      const key = document.getElementById('searchBox').value.trim();
      const out = document.getElementById('output');
      if(!key){ out.innerHTML = 'Masukkan Nomor Aset terlebih dahulu.'; return; }
      let kode = key;
      if(/^\d{8}$/.test(kode)) kode += '-0';
      else if(/^\d{8}-$/.test(kode)) kode += '0';
      const f = assets.find(a => a.kode === kode);
      out.innerHTML = f ? formatAsset(f) : 'Data tidak ditemukan.';

      // setelah pencarian, aktifkan flag supaya klik berikutnya select all
      if(f){
        selectNextClick = true;
      }
    }

    const searchBox = document.getElementById('searchBox');
    searchBox.addEventListener('keydown', e=>{ 
      if(e.key === 'Enter') searchAsset(); 
    });
    document.getElementById('searchButton').addEventListener('click', searchAsset);

    // event klik pada kotak pencarian
    searchBox.addEventListener('focus', function(){
      if(selectNextClick){
        this.select();      // select all
        selectNextClick = false; // habis dipakai, reset
      }
    });

    // running text isi dengan semua aset
    document.getElementById('runningText').textContent = 
      assets.map(a=>`${a.kode}: ${a.nama} (${a.lokasi})`).join(' | ');
  </script>
</body>
</html>
